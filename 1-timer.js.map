{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startButton = document.querySelector('[data-start]');\nconst inputEl = document.querySelector('#datetime-picker');\n\nstartButton.disabled = true;\n\nlet userSelectedDate; \n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {  \n        userSelectedDate = selectedDates[0];\n\n        if (userSelectedDate <= new Date()) {\n            iziToast.warning({\n              title: 'Warning',\n              message: 'Please choose a date in the future!'\n            });\n\n            startButton.disabled = true;\n\n            return;\n        } else {\n            startButton.disabled = false;\n        }\n\n        console.log(selectedDates[0]);\n    },\n};\n\nnew flatpickr('#datetime-picker', options); \n\nconst timer = {\n    intervalId: null,\n    elements: {\n        days: document.querySelector('[data-days]'),\n        hours: document.querySelector('[data-hours]'),\n        minutes: document.querySelector('[data-minutes]'),\n        seconds: document.querySelector('[data-seconds]'),\n    },\n\n    start() {\n        this.intervalId = setInterval(() => {\n            inputEl.disabled = true;\n            startButton.disabled = true;\n\n            const ms = this.deadline - Date.now();\n\n            if (ms <= 0) {\n                this.stop();\n                return;\n            }\n\n            const timeComponents = this.convertMs(ms);\n\n            this.elements.days.textContent = this.pad(timeComponents.days);\n            this.elements.hours.textContent = this.pad(timeComponents.hours);\n            this.elements.minutes.textContent = this.pad(timeComponents.minutes);\n            this.elements.seconds.textContent = this.pad(timeComponents.seconds);\n\n        }, 1000);\n    },\n\n    stop() {\n        clearInterval(this.intervalId);\n        startButton.disabled = true;\n        inputEl.disabled = false;\n    },\n\n    convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n    },\n\n    pad(value) {\n        return String(value).padStart(2, '0');\n    },\n};\n\nstartButton.addEventListener('click', () => {\n    timer.deadline = userSelectedDate;\n    timer.start();\n}); \n"],"names":["startButton","inputEl","userSelectedDate","options","selectedDates","iziToast","flatpickr","timer","ms","timeComponents","days","hours","minutes","seconds","value"],"mappings":"+IAKA,MAAMA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAU,SAAS,cAAc,kBAAkB,EAEzDD,EAAY,SAAW,GAEvB,IAAIE,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CAGnB,GAFAF,EAAmBE,EAAc,CAAC,EAE9BF,GAAoB,IAAI,KAAQ,CAChCG,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,qCACvB,CAAa,EAEDL,EAAY,SAAW,GAEvB,MACZ,MACYA,EAAY,SAAW,GAG3B,QAAQ,IAAII,EAAc,CAAC,CAAC,CAC/B,CACL,EAEA,IAAIE,EAAU,mBAAoBH,CAAO,EAEzC,MAAMI,EAAQ,CACV,WAAY,KACZ,SAAU,CACN,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACnD,EAED,OAAQ,CACJ,KAAK,WAAa,YAAY,IAAM,CAChCN,EAAQ,SAAW,GACnBD,EAAY,SAAW,GAEvB,MAAMQ,EAAK,KAAK,SAAW,KAAK,IAAG,EAEnC,GAAIA,GAAM,EAAG,CACT,KAAK,KAAI,EACT,MACH,CAED,MAAMC,EAAiB,KAAK,UAAUD,CAAE,EAExC,KAAK,SAAS,KAAK,YAAc,KAAK,IAAIC,EAAe,IAAI,EAC7D,KAAK,SAAS,MAAM,YAAc,KAAK,IAAIA,EAAe,KAAK,EAC/D,KAAK,SAAS,QAAQ,YAAc,KAAK,IAAIA,EAAe,OAAO,EACnE,KAAK,SAAS,QAAQ,YAAc,KAAK,IAAIA,EAAe,OAAO,CAEtE,EAAE,GAAI,CACV,EAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7BT,EAAY,SAAW,GACvBC,EAAQ,SAAW,EACtB,EAED,UAAUO,EAAI,CAOV,MAAME,EAAO,KAAK,MAAMF,EAAK,KAAG,EAC1BG,EAAQ,KAAK,MAAOH,EAAK,MAAO,IAAI,EACpCI,EAAU,KAAK,MAAQJ,EAAK,MAAO,KAAQ,GAAM,EACjDK,EAAU,KAAK,MAASL,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,EAED,IAAIC,EAAO,CACP,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,EAEAd,EAAY,iBAAiB,QAAS,IAAM,CACxCO,EAAM,SAAWL,EACjBK,EAAM,MAAK,CACf,CAAC"}